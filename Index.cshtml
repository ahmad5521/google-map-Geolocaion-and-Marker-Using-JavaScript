@*page content*@
<div class="wrapper wrapper-content animated fadeIn">
    <div class="row">
        <div class="container">
            <div id="ibox1" class="ibox">
                <div class="ibox-title">
                    <h3>الفروع </h3>
                </div>
                <div class="ibox-content">
                    <div class="sk-spinner sk-spinner-double-bounce">
                        <div class="sk-double-bounce1"></div>
                        <div class="sk-double-bounce2"></div>
                    </div>
                    <div class="col-12">
                        <div class="col-lg-7">
                            <button class="btn btn-primary" data-toggle="modal" data-target="#insertModal">اضافة جديد</button>
                        </div>
                        <div class="col-lg-5">
                            @*<div class="checkbox i-checks"><label> <input  type="checkbox" value=""> <i></i> Option one </label></div>*@
                            <div class="input-group m-b">
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-primary">بحث</button>
                                </span> <input id="search" type="text" class="form-control">
                            </div>
                        </div>

                    </div>



                    <table id="myTable"
                           class="table footable data footable-paging breakpoint-lg toggle-arrow-tiny"
                           data-page-size="10"
                           data-limit-navigation="5">
                        <thead>
                            <tr>
                                <th id="selector" class="center" style="text-align: right;">
                                    #
                                </th>
                                <th style="text-align: right;">
                                    رقم الفرع
                                </th>
                                <th style="text-align: right;">
                                    اسم المتجر
                                </th>
                                <th style="text-align: right;">
                                    اسم الفرع
                                </th>
                                <th style="text-align: right;">
                                    مفعل؟
                                </th>

                                @*<th>

                                    </th>*@
                            </tr>
                        </thead>
                    </table>


                </div>
                @*<div class="ibox-footer"></div>*@
            </div>
        </div>
    </div>

</div>




@*insert modal*@
<div class="modal fade" id="insertModal" tabindex="-1" role="alert" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title" id="myModalLabel">أضافة فرع</h4>
            </div>
            <div class="modal-body">
                <div style="direction: rtl;" class="tabs-container">
                    <ul class="nav nav-tabs right">
                        <li class="active"><a data-toggle="tab" href="#tab-1"> معلومات</a></li>
                        <li class=""><a data-toggle="tab" href="#tab-2">الموقع</a></li>
                        <li class=""><a data-toggle="tab" href="#tab-3">اوقات العمل</a></li>
                    </ul>
                    <div class="tab-content">
                        <div id="tab-1" class="tab-pane active">
                            <div class="panel-body">
                                <form>
                                    <div class="form-group">
                                        <label>اسم الفرع</label>
                                        <input type="text" class="form-control" id="a1" placeholder="اسم الفرع" />
                                    </div>
                                    <div class="form-group">
                                        <label>رقم الهاتف</label>
                                        <input type="text" class="form-control" id="a2" placeholder="رقم الهاتف" />
                                    </div>
                                    <div class="form-group">
                                        <label>الشخص المسؤول للتواصل</label>
                                        <input type="text" class="form-control" id="a3" placeholder="الشخص المسؤول للتواصل" />
                                    </div>
                                    <div class="form-group">
                                        <label>معلومات</label>
                                        <input type="text" row="5" class="form-control" id="a4" placeholder="معلومات" />
                                    </div>
                                    <div class="form-group">
                                        <label>مفعل؟</label>
                                        <div class="i-checks">
                                            <input type="checkbox" id="a5" style="position: absolute; opacity: 0;">
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div id="tab-2" class="tab-pane">
                            <div class="panel-body">
                                <div class="form-group">
                                    <label>longtiude</label>
                                    <input type="text" row="5" class="form-control" id="a4" placeholder="longtiude" />
                                </div>
                                <div class="form-group">
                                    <label>littitude</label>
                                    <input type="text" row="5" class="form-control" id="a4" placeholder="littitude" />
                                </div>
                                <p>
                                    Google map
                                </p>
                                <div class="google-map" id="map2"></div>
                            </div>
                        </div>
                        <div id="tab-3" class="tab-pane">
                            <div class="panel-body">
                                <div>
                                    <h1></h1>
                                </div>
                                <form>
                                    <div>
                                        <div class="form-group">
                                            <label>Enter Your Location Details</label>
                                            <input type="text" class="form-control" id="txt_location" placeholder="Enter Your Location Details" />
                                        </div>
                                        <div class="form-group">
                                            <button type="button" class="btn btn-primary" id="btnAdd" onclick="getmap();">بحث</button>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" disabled class="form-control" id="lititude" placeholder="lititude" />
                                        </div>
                                        <div class="form-group">
                                            <input type="text" disabled class="form-control" id="longtiod" placeholder="longtiod" />
                                        </div>
                                    </div>
                                </form>
                                <div id="map_populate" style="width:100%; height:500px; border: 5px solid #5E5454;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnAdd" onclick="Add();">اضافة</button>
                <button type="button" class="btn btn-primary" id="btnUpdate" style="display:none;" onclick="Update();">تعديل</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">اغلاق</button>
            </div>


        </div>
    </div>
</div>




@*update modal*@
<div class="modal fade" id="updateModal" tabindex="-1" role="alert" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title" id="myModalLabel">تعديل فرع</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="a1">الرقم</label>
                        <input type="text" class="form-control" id="u1" placeholder="Id" disabled="disabled" />
                    </div>
                    <div class="form-group">
                        <label for="competitionNote">اسم الفرع</label>
                        <input type="text" class="form-control" id="u3" placeholder="اسم الصنف" />
                    </div>
                    <div class="form-group">
                        <label for="competitionNote">مفعل؟</label>
                        <input type="text" class="form-control" id="u4" placeholder="اسم الصنف (E)" />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="btnAdd" onclick="update();">تعديل</button>
                <button type="button" class="btn btn-primary" id="btnUpdate" style="display:none;" onclick="Update();">تعديل</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">اغلاق</button>
            </div>


        </div>
    </div>
</div>

@section Styles {
    @Styles.Render("~/Content/plugins/iCheck/iCheckStyles")
    @Styles.Render("~/plugins/footableStyles")
    @Styles.Render("~/plugins/sweetAlertStyles")
    @Styles.Render("~/plugins/toastrStyles")

}

@section Scripts {


    @Scripts.Render("~/plugins/iCheck")
    @Scripts.Render("~/plugins/footable")
    @Scripts.Render("~/plugins/sparkline")
    @Scripts.Render("~/plugins/sweetAlert")
    @Scripts.Render("~/plugins/toastr")



    @Scripts.Render("https://maps.googleapis.com/maps/api/js?key=API_KEY")
    <script src="~/Scripts/branches.js"></script>

    <script>


        var mapcode;
        var diag;
        var markers = [];
        function initialize() {
            mapcode = new google.maps.Geocoder();
            var lnt = new google.maps.LatLng(26.45, 82.85);
            var diagChoice = {
                styles: [{ "featureType": "water", "stylers": [{ "saturation": 43 }, { "lightness": -11 }, { "hue": "#0088ff" }] }, { "featureType": "road", "elementType": "geometry.fill", "stylers": [{ "hue": "#ff0000" }, { "saturation": -100 }, { "lightness": 99 }] }, { "featureType": "road", "elementType": "geometry.stroke", "stylers": [{ "color": "#808080" }, { "lightness": 54 }] }, { "featureType": "landscape.man_made", "elementType": "geometry.fill", "stylers": [{ "color": "#ece2d9" }] }, { "featureType": "poi.park", "elementType": "geometry.fill", "stylers": [{ "color": "#ccdca1" }] }, { "featureType": "road", "elementType": "labels.text.fill", "stylers": [{ "color": "#767676" }] }, { "featureType": "road", "elementType": "labels.text.stroke", "stylers": [{ "color": "#ffffff" }] }, { "featureType": "poi", "stylers": [{ "visibility": "off" }] }, { "featureType": "landscape.natural", "elementType": "geometry.fill", "stylers": [{ "visibility": "on" }, { "color": "#b8cb93" }] }, { "featureType": "poi.park", "stylers": [{ "visibility": "on" }] }, { "featureType": "poi.sports_complex", "stylers": [{ "visibility": "on" }] }, { "featureType": "poi.medical", "stylers": [{ "visibility": "on" }] }, { "featureType": "poi.business", "stylers": [{ "visibility": "simplified" }] }],
                zoom: 15,
                center: lnt,
                diagId: google.maps.MapTypeId.ROADMAP
            }
            diag = new google.maps.Map(document.getElementById('map_populate'), diagChoice);


            diag.addListener('click', function (e) {
                if (markers.length !== 0)
                    deleteMarkers(null);
                addMarker(e.latLng);
            });
        }


        function addMarker(location) {
            var marker = new google.maps.Marker({
                position: location,
                map: diag
            });
            markers.push(marker);
            $("#lititude").val(marker.getPosition().lat());
            $("#longtiod").val(marker.getPosition().lng());
        }


        function setMapOnAll(map) {
            for (var i = 0; i < markers.length; i++) {
                console.log(markers[i].setMap(diag));
                markers[i].setMap(map);
            }
        }

        // Removes the markers from the map, but keeps them in the array.
        function clearMarkers() {
            setMapOnAll(null);
        }

        // Shows any markers currently in the array.
        function showMarkers() {
            setMapOnAll(diag);
        }

        // Deletes all markers in the array by removing references to them.
        function deleteMarkers() {
            clearMarkers();
            markers = [];
        }

        function getmap() {
            var completeaddress = document.getElementById('txt_location').value;
            mapcode.geocode({ 'address': completeaddress }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    diag.setCenter(results[0].geometry.location);
                    var hint = new google.maps.Marker({
                        diag: diag,
                        position: results[0].geometry.location
                    });
                } else {
                    alert('Location Not Tracked. ' + status);
                }
            }); 
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>


}

